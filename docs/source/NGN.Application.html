<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Application'>/**
</span> * @class Application
 * @singleton
 * The application scope is a globally accessible variable designed to store custom
 * application logic.
 * @aside guide application_scope 
 */
global.application = {
	
<span id='Application-method-load'>    /**
</span>     * @method 
     * This method accepts a key/value object or an absolute path to a JSON file.
     * **Object**
     *      var obj = {
     *          title:      'Awesome App',
                author:     'Acme, Inc.',
                keywords:   'Awesome, App'
     *      }
     *      
     *      application.load(obj);
     * 
     * **Filepath**
     *      application.load(__dirname + '/application.json');
     * @param {Object/String} config 
     * JSON Object or Filepath.
     */
    load:   function( config ) {
        
                // If the configuration is a filepath, read the file (expect JSON content)
                if (typeof config === 'string'){
                    config = require(config);
                } else if (typeof config !== 'object'){
                	throw Error('Could not load application values. Application configuration must be a JSON filepath or a JSON object.')
                }
                
                // Apply the object to the application scope.
                for (var key in config) {
                     if (config.hasOwnProperty(key)) {
                         Object.defineProperty(global.application,key,{
                                value:      config[key],
                                enumerable: true,
                                writable:   true 
                         });
                     }
                }
            },
    
<span id='Application-method-clear'>    /**
</span>     * @method
     * Resets the application scope to it's original default (blank) .
     */        
    clear:  function() {
                for (var attr in this){
                    if (attr !== 'load' &amp;&amp; attr !== 'clear')
                        delete this[attr];
                }
            },
    
<span id='Application-method-get'>    /**
</span>     * @method
     * Get a single property. Supports nested properties, such as `get('my.nested.attribute')`.
     * @param {String} property
     * The name of the application element to return.
     * @returns {Mixed}
     */        
    get:    function( property ) {
                var path = property.split('.'),
                    scope= this;
                
                for (var i=0; i&lt;path.length; i++)
                    scope = scope[path[i]];
                
                return scope;
            },
     
<span id='Application-method-set'>     /**
</span>      * @method
      * Set a property in the application scope. 
      * @param {String} property
      * @param {Any} value
      * This may be a string, date, or any valid JavaScript object. 
      */       
     set:   function( property, value ){
                if (this[property] !== undefined)
                    this[property] = value;
                else
                    Object.defineProperty(global.application,property,{
                        value:      value,
                        enumerable: true,
                        writable:   true
                    });
          	},
     
<span id='Application-method-getServer'>     /**
</span>      * @method
      * Get a server instance by it's registered name. 
	  * @param {String} name
      */     	
     getServer: function(name){
     	return __NGN.getServer(name);
     },
     
<span id='Application-method-getServersByType'>     /**
</span>      * @method
      * Get servers by a specific type. This returns an object with each attribute of the
      * object being the name of a server and each value being a reference to the server object. 
	  * @param {String} type
	  * @returns {Object}
      */
     getServersByType: function(type){
     	return __NGN.getServersByType(type);
     }
};
</pre>
</body>
</html>
