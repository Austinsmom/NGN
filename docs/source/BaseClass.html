<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Class'>/**
</span> * @class Class
 * A base class providing a simple inheritance model for JavaScript classes. All
 * API classes are an extension of this model.&lt;br/&gt;&lt;br/&gt;
 * **Example:**
 * 	   // Superclass
 *     var Vehicle = Class.extend({
 *         constructor: function (type) {
 *             this.type = type;
 *         },
 *         accelerate: function() {
 *             return this.type+' is accelerating';
 *         }
 *     });
 *     
 *     // Subclass
 *     var Car = Vehicle.extend({
 *         constructor: function (doorCount) {
 *              Car.super.constructor.call(this, 'car');
 *             
 *              Object.defineProperty(this,'doors',{
 *                  value:      doorCount || 4, // Default = 4
 *                  writable:   true,
 *                  enumerable: true
 *              });
 *         },
 *         accelerate: function () {
 *             console.log('The '+this.doors+'-door '+ Car.super.accelerate.call(this));
 *         }
 *     });
 *     
 *     var mustang = new Car(2);
 *     mustang.accelerate();
 * 
 *     //Outputs: The 2-door car is accelerating.
 * 
 * @docauthor Corey Butler
 * @aside guide class_system
 */
var Class = {

<span id='Class-method-extend'>	/**
</span>	 * @method extend
	 * The properties of the object being extended.
	 *	   // Subclass
     *     var Car = Vehicle.extend({
     *         constructor: function (doors) {
     *              Car.super.constructor.call(this, 'car');
     *             
     *              Object.defineProperty(this,'doors',{
     *                  value:      doors || 4,
     *                  writable:   true,
     *                  enumerable: true
     *              });
     *         },
     *         accelerate: function () {
     *             console.log('The '+this.doors+'-door '+ Car.super.accelerate.call(this));
     *         }
     *     });
	 * @param {Object} obj
 	 * @returns {Object}
	 */
    extend: function ( obj ) {
        var parent      = this.prototype || Class,
            prototype   = Object.create(parent);
        
        Class.merge(obj, prototype);
        
        var _constructor = prototype.constructor;
        if (!(_constructor instanceof Function)) {
            throw Error(&quot;No constructor() method.&quot;);
        }
        
<span id='Class-property-prototype'>        /**
</span>         * @property prototype
         * @protected
         */        
        _constructor.prototype = prototype;
        
<span id='Class-property-super'>        /**
</span>         * @property super
         * Refers to the parent class.
         * @protected
         */
        _constructor.super = parent;
        
        // Inherit class method
        _constructor.extend = this.extend;
        
        return _constructor;
    },

<<<<<<< HEAD
    /**
     * @method merge
=======
<span id='Class-method-merge'>    /**
</span>     * @method
>>>>>>> 7eb5b5069f01e784ed5b7f7d9520d79c5e5ff745
     * Merges the source to target
     * @private
	 * @param {Object} [source]
	 * Original object.
	 * @param {Object} target 
	 * New object (this).
	 * @param {Boolean} [force=false]
	 * @returns {Object}
     */
    merge: function(source, target, force) {
    	target = target || this;
    	force = force || false;
        Object.getOwnPropertyNames(source).forEach(function(attr) {
       	
        	// If the attribute already exists,
        	// it will not be recreated, unless force is true.
        	if (target.hasOwnProperty(attr)){
        		if (force)
        			delete target[attr];
        	}	
	        
	        if (!target.hasOwnProperty(attr))
		        Object.defineProperty(target, attr, Object.getOwnPropertyDescriptor(source, attr));
			
        });
        return target;
    }
};

// Make the class available as a module.
module.exports = Class;</pre>
</body>
</html>
